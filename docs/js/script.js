"use strict";var rock=document.getElementById("rock"),paper=document.getElementById("paper"),scissors=document.getElementById("scissors"),outputMessages=document.getElementById("outputMessages"),newGameButton=document.getElementById("newGameButton"),roundsToWin=document.getElementById("roundsToWin"),wonMatches=document.getElementById("wonMatches"),actionFieldPlayer=document.getElementById("actionFieldPlayer"),actionFieldCpu=document.getElementById("actionFieldCpu"),playerScore=document.getElementById("playerScore"),cpuScore=document.getElementById("cpuScore"),modals=document.querySelectorAll(".modal"),playerNameInput=document.querySelector("#player-name"),roundsNumberInput=document.querySelector("#rounds-number"),startGamePopupButton=document.querySelector("#start-button"),gameRulesButton=document.querySelector("#game-rules"),cpuActionIcon=document.querySelector("#cpu-move i"),params={victories:0,playerPoints:0,cpuPoints:0,rounds:0,message:"",progress:[]},gameProgress={roundNumber:0,message:"",result:""},showModal=function(e){document.querySelector("#modal-overlay").classList.add("show"),modals.forEach(function(e){e.classList.remove("show")}),document.querySelector(e).classList.add("show")},hideModal=function(){document.querySelector("#modal-overlay").classList.remove("show")};document.querySelector("#modal-overlay").addEventListener("click",hideModal);for(var i=0;i<modals.length;i++)modals[i].addEventListener("click",function(e){e.stopPropagation()});var closeButtons=document.querySelectorAll(".modal__close");for(i=0;i<closeButtons.length;i++)closeButtons[i].addEventListener("click",hideModal);var modalContent=function(e){var o=document.querySelector(e).querySelector(".modal__header"),a=document.querySelectorAll(".table-content__column");o.innerHTML=params.message,a.forEach(function(e){for(;e.firstChild;)e.removeChild(e.firstChild)});for(var t=0;t<params.progress.length;t++){var r=document.createElement("div");r.innerHTML=params.progress[t].roundNumber;var n=document.createElement("div");n.innerHTML=params.progress[t].message;var s=document.createElement("div");s.innerHTML=params.progress[t].result,document.querySelector(".table-content__column--rounds").appendChild(r),document.querySelector(".table-content__column--player-moves").appendChild(n),document.querySelector(".table-content__column--result").appendChild(s)}},score=function(e,o){"addPoint"==o&&"cpu"==e?params.cpuPoints+=1:"addPoint"==o&&"player"==e?params.playerPoints+=1:"noPoint"==o&&"noOne"==e&&(params.playerPoints=0,params.cpuPoints=0),playerScore.innerHTML=params.playerPoints,cpuScore.innerHTML=params.cpuPoints},startGameSettings=function(){actionFieldPlayer.classList.remove("invisible"),actionFieldCpu.classList.remove("invisible"),outputMessages.innerHTML="New game - rounds required to win: "+roundsToWin.innerHTML,(0<params.cpuPoints||0<params.playerPoints)&&(params.victories=0),score("noOne","noPoint"),wonMatches.innerHTML=params.victories},gameInit=function(){showModal("#match-start-modal"),actionFieldPlayer.classList.add("invisible"),actionFieldCpu.classList.add("invisible")},startGame=function(){hideModal(),removeClassesForIconFields(),params.rounds=roundsNumberInput.value,roundsToWin.innerHTML=params.rounds,document.querySelector("#score-board-player-name").innerHTML=playerNameInput.value,startGameSettings(),gameProgress.roundNumber=0,params.progress=[]};startGamePopupButton.addEventListener("click",startGame),newGameButton.addEventListener("click",gameInit),gameRulesButton.addEventListener("click",function(){showModal("#game-rules-modal")});var startModalValidation=function(){startGamePopupButton.disabled=!0,playerNameInput.checkValidity()&&roundsNumberInput.checkValidity()&&(startGamePopupButton.disabled=!1)};document.querySelectorAll(".modal__input").forEach(function(e){e.addEventListener("keyup",function(){startModalValidation()})});var winCondition=function(){var e,o=params.playerPoints+" - "+params.cpuPoints+"<br><br>";params.cpuPoints==params.rounds?(e=o+"Game over - you lost.<br>Click 'New game' to start next match",params.victories=0):params.playerPoints==params.rounds&&(e=o+"YOU WON ENTIRE GAME!<br>Click 'New game' to start next match",params.victories+=1),params.cpuPoints!=params.rounds&&params.playerPoints!=params.rounds||(params.message=e,modalContent("#match-end-modal"),showModal("#match-end-modal"),actionFieldPlayer.classList.add("invisible"),actionFieldCpu.classList.add("invisible"),score("noOne","noPoint")),wonMatches.innerHTML=params.victories},removeClassesForIconFields=function(){cpuActionIcon.className=""},cpuMoveIcon=function(e){removeClassesForIconFields(cpuActionIcon),cpuActionIcon.classList.add("far","button__icon"),"Rock"==e?cpuActionIcon.classList.add("fa-hand-rock","button__cpu-icon--rock"):"Paper"==e?cpuActionIcon.classList.add("fa-hand-paper","button__cpu-icon--paper"):"Scissors"==e?cpuActionIcon.classList.add("fa-hand-scissors","button__cpu-icon--scissors"):"Lizard"==e?cpuActionIcon.classList.add("fa-hand-lizard","button__cpu-icon--lizard"):"Spock"==e&&cpuActionIcon.classList.add("fa-hand-spock","button__cpu-icon--spock")},playerMove=function(e){var o=["Rock","Paper","Scissors","Lizard","Spock"][Math.floor(5*Math.random())],a=playerNameInput.value+" played "+e+" - Computer played "+o;cpuMoveIcon(o),("Rock"==e||"Spock"==e)&&"Paper"==o||("Paper"==e||"Lizard"==e)&&"Scissors"==o||("Scissors"==e||"Lizard"==e)&&"Rock"==o||("Spock"==e||"Paper"==e)&&"Lizard"==o||("Scissors"==e||"Rock"==e)&&"Spock"==o?(a+=". Computer scores a point.<br>",score("cpu","addPoint")):e==o?a+=". Draw.<br>":(a+=". You score a point.<br>",score("player","addPoint")),outputMessages.innerHTML=a,gameProgress.roundNumber+=1,gameProgress.message=a,gameProgress.result=params.playerPoints+" - "+params.cpuPoints,params.progress.push({roundNumber:gameProgress.roundNumber,message:gameProgress.message,result:gameProgress.result}),winCondition()};document.querySelectorAll(".player-move").forEach(function(o){o.addEventListener("click",function(){var e=o.getAttribute("data-move");playerMove(e)})});